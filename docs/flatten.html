

<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="generator" content="HelpNDoc Personal Edition 7.4.0.390">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="favicon.ico"/>

  <title>flatten</title>
  <meta name="description" content="" /> 
  <meta name="keywords" content="">



  

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="flatten">
  <meta name="twitter:description" content="">

  <!-- Open Graph data -->
  <meta property="og:title" content="flatten" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="CSVfix 1.6  Manual" /> 

  <!-- Bootstrap core CSS -->
  <link href="vendors/bootstrap-3.4.1/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="vendors/bootstrap-3.4.1/css/ie10-viewport-bug-workaround.css" rel="stylesheet"/>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="vendors/html5shiv-3.7.3/html5shiv.min.js"></script>
      <script src="vendors/respond-1.4.2/respond.min.js"></script>
    <![endif]-->

  <!-- JsTree styles -->
  <link href="vendors/jstree-3.3.10/themes/default/style.min.css" rel="stylesheet"/>

  <!-- Hnd styles -->
  <link href="css/layout.min.css" rel="stylesheet" />
  <link href="css/effects.min.css" rel="stylesheet" />
  <link href="css/theme-light-blue.min.css" rel="stylesheet" />
  <link href="css/print.min.css" rel="stylesheet" media="print" />
  <style type="text/css">nav { width: 350px} @media screen and (min-width:769px) { body.md-nav-expanded div#main { margin-left: 350px} body.md-nav-expanded header { padding-left: 364px} }</style>

  <!-- Content style -->
  <link href="css/hnd.content.css" rel="stylesheet" />

  



</head>

<body class="md-nav-expanded">



  <div id="skip-link">
    <a href="#main-content" class="element-invisible">Skip to main content</a>
  </div>

  <header class="headroom">
    <button class="hnd-toggle btn btn-default">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>        
    </button>
    <h1>CSVfix 1.6  Manual</h1>
    
  </header>

  <nav id="panel-left" class="md-nav-expanded">
    <!-- Nav tabs -->
    <ul class="tab-tabs nav nav-tabs" role="tablist">
      <li id="nav-close"> 
        <button class="hnd-toggle btn btn-default">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        </button>
      </li>
      
	  
        <li role="presentation" class="tab active">
            <a href="#contents" id="tab-contents" aria-controls="contents" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-list"></i>
                Contents
            </a>
        </li>
      
        <li role="presentation" class="tab">
            <a href="#index" id="tab-index" aria-controls="index" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-asterisk"></i>
                Index
            </a>
        </li>
      
        <li role="presentation" class="tab">
            <a href="#search" id="tab-search" aria-controls="search" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-search"></i>
                Search
            </a>
        </li>
      
    </ul>  <!-- /Nav tabs -->

    <!-- Tab panes -->
    <div class="tab-content">
	  
      <div role="tabpanel" class="tab-pane active" id="contents">
        <div id="toc" class="tree-container unselectable"
            data-url="_toc.json"
            data-openlvl="1"
        >
            
        </div>
      </div>  <!-- /contents-->
      
      <div role="tabpanel" class="tab-pane" id="index">
        <div id="keywords" class="tree-container unselectable"
            data-url="_keywords.json"
            data-openlvl="1"
        >
            
        </div>
      </div>  <!-- /index-->
      
      <div role="tabpanel" class="tab-pane" id="search">
        <div class="search-content">
          <div class="search-input">
            <form id="search-form">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" class="form-control" id="input-search" name="input-search" placeholder="Search..." />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                      <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button>
                  </span>
                </div>
              </div>
            </form>
          </div>  <!-- /search-input -->
          <div class="search-result">
            <div id="search-info"></div>
            <div class="tree-container unselectable" id="search-tree"></div>
          </div>  <!-- /search-result -->
        </div>  <!-- /search-content -->
      </div>  <!-- /search-->
      
    </div>  <!-- /Tab panes -->

  </nav>

  <div id="main">

    <article>
        <div id="topic-content" class="container-fluid" 
		  data-hnd-id="flatten"
		  data-hnd-context="19"
		  data-hnd-title="flatten"
		>
            
                <div class="navigation">
                    <ol class="breadcrumb">
                        <li><a href="Commands.html">Commands</a></li>
                    </ol>
                    <div class="nav-arrows">
                        <div class="btn-group btn-group" role="group"><a class="btn btn-default" href="Commands.html" title="Commands" role="button"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a><a class="btn btn-default" href="find.html" title="find" role="button"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span></a><a class="btn btn-default" href="from_xml.html" title="from_xml" role="button"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></a></div>
                    </div>
                </div> 
            

            <a id="main-content"></a>

            <h2>flatten</h2>

            <div class="main-content">
                
<p class="rvps2"><span class="rvts26">The </span><span class="rvts29">flatten</span><span class="rvts26"> command is used to flatten multiple input rows into a single input row, depending on an identical key field or fields. This is useful if you have data like average temperature data for each month in a year (not all values shown):</span><br/><span class="rvts26"></span><br/><span class="rvts37">1990,&nbsp;0</span><br/><span class="rvts37">1990,&nbsp;0</span><br/><span class="rvts37">1990,&nbsp;4</span><br/><span class="rvts37">...</span><br/><span class="rvts37">1990,&nbsp;2</span><br/><span class="rvts37">1990,&nbsp;1</span><br/><span class="rvts37">1991,&nbsp;1</span><br/><span class="rvts37">...</span><br/><span class="rvts37"></span><br/><span class="rvts26">and you would like them to look like:</span><br/><span class="rvts26"></span><br/><span class="rvts37">1990,&nbsp;0,&nbsp;0,&nbsp;4,&nbsp;...&nbsp;2,&nbsp;1</span><br/><span class="rvts37">1991,&nbsp;1,&nbsp;...</span><br/><span class="rvts26"></span><br/><span class="rvts26">Values are pulled together so long as the key (in this case the year) for successive input rows is the same, and the flattened row is output when the key changes.</span><br/><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">You can also use </span><span class="rvts29">flatten</span><span class="rvts26"> to flatten master/detail records. For example, suppose you have this data file:</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts17">Joe,Blow</span></p>
<p class="rvps2"><span class="rvts17">2012-01-13,Phone bill,105.10</span></p>
<p class="rvps2"><span class="rvts17">Jane,Doe</span></p>
<p class="rvps2"><span class="rvts17">2012-01-10,Groceries,5.10</span></p>
<p class="rvps2"><span class="rvts17">2012-01-12,Drinks,7.15</span></p>
<p class="rvps2"><span class="rvts17"><br/></span></p>
<p class="rvps2"><span class="rvts26">and you would like to convert it to flat CSV file that looks like this:</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts17">Joe,Blow,2012-01-13,Phone bill,105.10</span></p>
<p class="rvps2"><span class="rvts17">Jane,Doe,2012-01-10,Groceries,5.10</span></p>
<p class="rvps2"><span class="rvts17">Jane,Doe,2012-01-12,Drinks,7.15</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">You can do that with this flatten command:</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts17">csvfix flatten -me '$fields == 2' &nbsp;expend.csv</span></p>
<p class="rvps2"><span class="rvts17"><br/></span></p>
<p class="rvps2"><span class="rvts6">which says that a master record is one that consists of two fields. The </span><span class="rvts16">-me</span><span class="rvts6"> option specifies an expression which tests each input record; &nbsp;if it evaluates to true, the record is treated as the master for the following detail records. The details are simply appended to the master.</span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p class="rvps2"><span class="rvts6"></span><br/><span class="rvts6">See also: </span><a class="rvts47" href="unflatten.html">unflatten</a><br/><span class="rvts6"></span><br/><span class="rvts6"><br/></span></p>
<div class="rvps2">
<table border="1" cellpadding="1" cellspacing="0" style="border-spacing: 0px;">
 <tr valign="top">
  <td width="140" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts29">Flag</span></p>
  </td>
  <td width="62" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts29">Req'd</span><span class="rvts26">?</span></p>
  </td>
  <td width="545" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts29">Description</span></p>
  </td>
 </tr>
 <tr valign="top">
  <td width="140" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts37">-k&nbsp;key</span></p>
  </td>
  <td width="62" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">No</span></p>
  </td>
  <td width="545" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">Specifies one or more key fields. Default is to use the first field as the key</span></p>
  </td>
 </tr>
 <tr valign="top">
  <td width="140" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts37">-f&nbsp;data</span></p>
  </td>
  <td width="62" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">No</span></p>
  </td>
  <td width="545" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">Specifies the data fields. By default, all fields except the key are considered to be data.</span></p>
  </td>
 </tr>
 <tr valign="top">
  <td width="140" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts37">-r</span></p>
  </td>
  <td width="62" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">No</span></p>
  </td>
  <td width="545" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">Remove the key from the output. By default the key is retained and becomes the first field(s) in the output.</span></p>
  </td>
 </tr>
 <tr valign="top">
  <td width="140" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts37">-me expr</span></p>
  </td>
  <td width="62" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">No</span></p>
  </td>
  <td width="545" valign="top" style="border-style: inset; padding: 1px;">
   <p class="rvps2"><span class="rvts26">Specify an expression that can identify a master record in a stream of master/detail data. See above for more details. Mutually exclusive with the other options.</span></p>
  </td>
 </tr>
</table>
</div>
<p class="rvps2"><span class="rvts26"></span><br/><span class="rvts26"></span><br/><span class="rvts26">The following example flattens the data in the</span><a class="rvts27" href="flatcsv.html"> </a><a class="rvts27" href="flatcsv.html">flat.csv</a><span class="rvts26"> file:</span><br/><span class="rvts26"></span><br/><span class="rvts37">csvfix&nbsp;flatten&nbsp;data/flat.csv</span><br/><span class="rvts26"></span><br/><span class="rvts26">producing:</span><br/><span class="rvts26"></span><br/><span class="rvts37">"A","a1","a2","a3","a4"</span><br/><span class="rvts37">"B","b1","b2"</span><br/><span class="rvts37">"A","a5","a6"</span><br/><span class="rvts37">"C","c1","c2","c3","c4"</span><span class="rvts6"></span></p>
<p class="rvps4" style="clear: both;"><span class="rvts19">Created with the Personal Edition of HelpNDoc: </span><a class="rvts20" href="https://www.helpndoc.com/help-authoring-tool">Free help authoring environment</a></p>

            </div>
            
            <div id="topic_footer"><div id="topic_footer_content">Copyright &copy; 2013 Neil Butterworth</div></div>
        </div>  <!-- /#topic-content -->
    </article>

    <footer></footer>

  </div>  <!-- /#main -->

  <div class="mask" data-toggle="sm-nav-expanded"></div>
  
  <!-- Modal -->
  <div class="modal fade" id="hndModal" tabindex="-1" role="dialog" aria-labelledby="hndModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="hndModalLabel"></h4>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary modal-btn-close" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Splitter -->
  <div id="hnd-splitter" style="left: 350px"></div>  

  <!-- Scripts -->
  <script src="vendors/jquery-3.5.1/jquery.min.js"></script>
  <script src="vendors/bootstrap-3.4.1/js/bootstrap.min.js"></script>
  <script src="vendors/bootstrap-3.4.1/js/ie10-viewport-bug-workaround.js"></script>
  <script src="vendors/markjs-8.11.1/jquery.mark.min.js"></script>
  <script src="vendors/uri-1.19.2/uri.min.js"></script>
  <script src="vendors/imageMapResizer-1.0.10/imageMapResizer.min.js"></script>
  <script src="vendors/headroom-0.11.0/headroom.min.js"></script>
  <script src="vendors/jstree-3.3.10/jstree.min.js"></script>  
  <script src="vendors/interactjs-1.9.22/interact.min.js"></script>  

  <!-- HelpNDoc scripts -->
  <script src="js/polyfill.object.min.js"></script>
  <script src="_translations.js"></script>
  <script src="js/hndsd.min.js"></script>
  <script src="js/hndse.min.js"></script>
  <script src="js/app.min.js"></script>

  <!-- Init script -->
  <script>
    $(function() {
      // Create the app
      var app = new Hnd.App();
      // Update translations
      hnd_ut(app);
	  // Instanciate imageMapResizer
	  imageMapResize();
	  // Custom JS
	  
      // Boot the app
      app.Boot();
    });
  </script>



</body>

</html>

